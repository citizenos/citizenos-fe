<div class="overlay" mat-dialog-close></div>
<div class="dialog">
  <div class="dialog_header voting">
    <div class="header_with_icon voting">
      <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="40" height="40" rx="20" fill="#5AB467" />
        <path
          d="M26.3432 15.9229L27.0634 10L21.1505 10.7214L23.1001 12.6743L15.7221 20.0647L17.1292 21.4742L24.5072 14.0838L26.3432 15.9229Z"
          fill="white" />
        <path d="M17.9282 29L28 18.9113L26.5929 17.5018L17.9352 26.174L13.4071 21.6524L12 23.0618L17.9282 29Z"
          fill="white" />
      </svg>

      <h4 class="title" translate="MODALS.TOPIC_VOTE_DELEGATE_HEADING"></h4>
    </div>
    <div class="dialog_close">
      <button class="btn_dialog_close" mat-dialog-close>
        <div class="icon_mobile_close"></div>
      </button>
    </div>
  </div>

  <div class="dialog_content">
    <div class="dialog_info_wrap">
      <div class="dialog_info" translate="MODALS.TOPIC_VOTE_DELEGATE_LBL_SEARCH_MEMBERS"></div>
      <div class="dialog_info">
        <div id="search_wrap">
          <typeahead id="input_area" [term]="searchStringUser" (search)="search($event)" (select)="addUser($event)"
            (enterAction)="addUser($event)"
            [placeholder]="'MODALS.TOPIC_VOTE_DELEGATE_PLACEHOLDER_SEARCH_BY_NAME' | translate">
            <ng-container *ngIf="searchResultUsers$ | async as searchResults">
              <div class="search_area_wrap" [ngClass]="{hidden: !searchResults.length}">
                <div class="search_dropdown_item" [typeaheadItem]="user" *ngFor="let user of searchResults">
                  <div class="item_text_wrap">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M7.83808 1.33398C8.36851 1.33398 8.87722 1.5447 9.25229 1.91977L12.7474 5.41487C13.1225 5.78994 13.3332 6.29865 13.3332 6.82908V13.1858C13.3332 14.0007 12.6932 14.6673 11.9109 14.6673H4.08161C3.29939 14.6673 2.6665 14.0007 2.6665 13.1858L2.67362 2.81547C2.67362 2.00065 3.3065 1.33398 4.08873 1.33398H7.83808ZM12.3251 6.3259C12.4511 6.45189 12.3618 6.66732 12.1837 6.66732H8.99984C8.44755 6.66732 7.99984 6.2196 7.99984 5.66732V2.48349C7.99984 2.30531 8.21527 2.21608 8.34126 2.34207L12.3251 6.3259Z"
                        fill="#2C3B47" />
                    </svg>

                    <b>{{user.name}}</b>
                  </div>
                  <a class="submit_link" (click)="addUser(user)"
                    translate="MODALS.TOPIC_VOTE_DELEGATE_TXT_PRESS_ENTER_OR_CLICK_TO_ADD">
                  </a>
                </div>
              </div>
            </ng-container>
          </typeahead>
        </div>
        <div *ngIf="delegateUser">
          <div class="row_list">
            <div class="row_cell_dialog image_cell">
              <div class="profile_image_wrap">
                <img class="profile_image" *ngIf="delegateUser.imageUrl" [src]="delegateUser.imageUrl">
                <div class="profile_image_filler" *ngIf="!delegateUser.imageUrl">
                  <cos-initials class="table_cell" *ngIf="delegateUser.name" [name]="delegateUser.name">
                  </cos-initials>
                </div>
              </div>
              <a class="cell_title">
                {{delegateUser.name}}
              </a>
            </div>
            <div class="row_cell_dialog">
              <button (click)="doRemoveDelegateUser()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 9H11V17H9L9 9Z" fill="#2C3B47" />
                  <path d="M15 9H13V17H15V9Z" fill="#2C3B47" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M17 5V4C17 2.89543 16.1046 2 15 2L9 2C7.89543 2 7 2.89543 7 4L7 5H4C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H5L5 18C5 19.6569 6.34315 21 8 21L16 21C17.6569 21 19 19.6569 19 18L19 7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5L17 5ZM15 4L9 4V5L15 5V4ZM17 7L7 7L7 18C7 18.5523 7.44772 19 8 19L16 19C16.5523 19 17 18.5523 17 18V7Z"
                    fill="#2C3B47" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dialog_footer with_buttons">
    <button class="btn_medium_submit" (click)="doSaveDelegate()" *ngIf="delegateUser"
      translate="MODALS.TOPIC_VOTE_DELEGATE_BTN_DELEGATE" mat-dialog-close></button>
    <a mat-dialog-close translate="COMPONENTS.TOPIC_VOTE_CREATE.LNK_CANCEL"></a>
  </div>
</div>
<!--div id="root_lightbox" class="full_screen">
  <div id="lightbox" class="wide_lightbox with_title_description with_header_menu">
    <div id="lightbox_wrap">

      <div id="lightbox_header">

        <div id="lightbox_header_text">
          <div class="title" translate="MODALS.TOPIC_VOTE_DELEGATE_HEADING"></div>
          <div class="title_description">{{topic.title}}</div>
        </div>

        <div id="lightbox_close" class="ngdialog-close" mat-dialog-close>
          <div class="table_cell ngdialog-close">
            <div class="ngdialog-close sprite sprite-btn-popup-close2x">
            </div>
          </div>
        </div>

        <div class="clearer"></div>

        <div class="header_row_wrap">
          <div class="header_row" slide-controller identifier="topicSettingsSlider">
            <div class="tab_button active">
              <div class="tab_buttom_wrap">
                <div class="tab_button_text" translate="MODALS.TOPIC_VOTE_DELEGATE_TAB"></div>
                <div class="blue_bottom_line"></div>
              </div>
            </div>

          </div>
        </div>
      </div>


      <div class="line lightest_line"></div>

      <div class="lightbox_content">

        <div class="lightbox_section">

          <div class="input_text_margin_bottom" translate="MODALS.TOPIC_VOTE_DELEGATE_LBL_SEARCH_MEMBERS"></div>

          <div class="searchbox_with_icon_and_text only_text">
            <div [cosDropdown]
              [ngClass]="{search_with_dropdown : resultCount, dropdown_active : resultCount}">

              <typeahead id="userSearch" class="auto-complete"
                [term]="searchStringUser" (search)="search($event)" (select)="addUser($event)"
                [placeholder]="'MODALS.TOPIC_VOTE_DELEGATE_PLACEHOLDER_SEARCH_BY_NAME' | translate">
                <div class="search_area_wrap">
                  <div class="search_dropdown_area" [ngClass]="{hidden: !resultCount}">
                    <div class="search_dropdown_item" [typeaheadItem]="user"
                      *ngFor="let user of searchResultUsers$ | async">
                      <div class="table_cell search_item_text">
                        <b>{{user.name}}</b> {{user.email}}
                      </div>
                      <div class="table_cell blue_link">
                        <span class="submit_link" (click)="addUser(user)"
                          translate="MODALS.TOPIC_VOTE_DELEGATE_TXT_PRESS_ENTER_OR_CLICK_TO_ADD"></span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="search_text">
                  <div class="table_cell blue_link" (click)="addUser()"
                    translate="MODALS.GROUP_CREATE_SETTINGS_TXT_PRESS_ENTER_TO_ADD"></div>
                </div>

              </typeahead>
            </div>
            <div class="search_text">
              <div class="table_cell blue_link" translate="MODALS.TOPIC_VOTE_DELEGATE_TXT_PRESS_ENTER_TO_ADD"></div>
            </div>
          </div>

        </div>


        <div class="lightbox_section double_row_list user_list">

          <div *ngIf="delegateUser">

            <div class="category_title">
              <div class="table_cell" translate="MODALS.TOPIC_VOTE_DELEGATE_TH_USERS"></div>
            </div>

            <table>

              <tr>
                <td>
                  <div class="profile_image_wrapper dark">
                    <!--div class="profile_moon sprite"></div->
                    <div class="account_picture">
                      <img *ngIf="delegateUser.imageUrl" [src]="delegateUser.imageUrl">
                      <div class="profile_image_filler">
                        <cos-initials class="table_cell" [name]="delegateUser.name"></cos-initials>
                        <div class="profile_circle"></div>
                      </div>
                    </div>
                  </div>
                  <div class="name_wrap">
                    <div class="table_cell">
                      <div class="blue_link" (click)="doRemoveDelegateUser()">
                        {{delegateUser.name}}</div>
                      <div class="via">{{delegateUser.company}}</div>
                    </div>
                  </div>
                </td>
                <td>
                  <div class="btn_wrap recycle_bin white_bg">
                    <div class="btn" (click)="doRemoveDelegateUser()">
                      <div class="table_cell">
                        <div class="sprite desktop_fix sprite-mytopics-icon-deletetopic2x"></div>
                        <div class="sprite mobile_fix sprite-mytopics-icon-deletetopic2x"></div>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>

            </table>

          </div>


        </div>

      </div>

      <div class="lightbox_footer">

        <div class="line lightest_line"></div>
        <div class="blue_button_wrap">
          <div class="blue_button ngdialog-close" *ngIf="delegateUser"
            (click)="doSaveDelegate()" translate="MODALS.TOPIC_VOTE_DELEGATE_BTN_DELEGATE" mat-dialog-close></div>
        </div>
      </div>

    </div>
  </div>

  <div id="close_lightbox" class="ngdialog-close" mat-dialog-close>

  </div>

</!--div-->
